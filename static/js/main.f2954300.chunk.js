(this["webpackJsonpevents-demo"]=this["webpackJsonpevents-demo"]||[]).push([[0],{12:function(t){t.exports=JSON.parse('[{"id":1,"title":"react cookbook","price":136.2,"inventory":3},{"id":2,"title":"Django","price":44.5,"inventory":2},{"id":3,"title":"flasl","price":45,"inventory":1}]')},16:function(t,e,n){t.exports=n(29)},21:function(t,e,n){},27:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),o=n(5),u=n.n(o),i=(n(21),n(4)),a=n(3),d=n(2),l=n(1),s=function(t,e){switch(e.type){case"ADD_TO_CART":return Object(d.a)({},t,{inventory:t.inventory-1});default:return t}},f=Object(l.combineReducers)({byId:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RECEIVE_PRODUCTS":return Object(d.a)({},t,{},e.products.reduce((function(t,e){return t[e.id]=e,t}),{}));default:var n=e.productId;return n?Object(d.a)({},t,Object(a.a)({},n,s(t[n],e))):t}},visibleIds:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RECEIVE_PRODUCTS":return e.products.map((function(t){return t.id}));default:return t}}}),p=function(t,e){return t.byId[e]},v=function(t){return t.visibleIds.map((function(e){return p(t,e)}))},y=n(12),m={getProducts:function(t,e){return setTimeout((function(){return t(y)}),e||100)},buyProducts:function(t,e,n){return setTimeout((function(){return e()}),n||100)}},h=Object(i.b)((function(t){return{products:v(t.products)}}),{addToCart:function(t){return function(e,n){n().products.byId[t].inventory>0&&e(function(t){return{type:"ADD_TO_CART",productId:t}}(t))}}})((function(t){var e=t.products,n=t.addToCart;return c.a.createElement("div",null,c.a.createElement("h2",null,"Bookshelf!"),c.a.createElement("div",null,e.map((function(t){return c.a.createElement("div",{key:t.id},t.title," --- $",t.price,"/per Inventory:"," ",t.inventory?"".concat(t.inventory):null,c.a.createElement("button",{onClick:function(){return n(t.id)},disabled:t.inventory>0?"":"disabled"},t.inventory>0?"add to cart":"sold out :>"))}))))})),E=n(15),b={addedIds:[],quantityById:[]},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.addedIds,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_TO_CART":return-1!==t.indexOf(e.productId)?t:[].concat(Object(E.a)(t),[e.productId]);default:return t}},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.quantityById,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_TO_CART":var n=e.productId;return Object(d.a)({},t,Object(a.a)({},n,(t[n]||0)+1));default:return t}},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CHECKOUT_REQUEST":return b;case"CHECKOUT_FAILED":return e.cart;default:return{addedIds:I(t.addedIds,e),quantityById:O(t.quantityById,e)}}},T=Object(l.combineReducers)({cart:C,products:f}),g=function(t){return function(t){return t.addedIds}(t.cart)},j=function(t,e){return function(t,e){return t.quantityById[e]||0}(t.cart,e)},k=function(t,e){return p(t.products,e)},w=function(t){return g(t).reduce((function(e,n){return e+k(t,n).price*j(t,n)}),0).toFixed(2)},D=function(t){return g(t).map((function(e){return Object(d.a)({},k(t,e),{quantity:j(t,e)})}))},_=Object(i.b)((function(t){return{products:D(t),total:w(t)}}),{checkout:function(t){return function(e,n){var r=n().cart;e({type:"CHECKOUT_REQUEST"}),m.byProducts(t,(function(){e({type:"CHECKOUT_SUCCEED",cart:r})}))}}})((function(t){var e=t.products,n=t.total,r=t.checkout,o=e.length>0;return c.a.createElement("div",null,c.a.createElement("h3",null,"Welcome to the bookshop cart"),c.a.createElement("em",null,"Please choose something!"),c.a.createElement("div",null," ",e.map((function(t){return c.a.createElement("div",{key:t.id},"$",t.title," - ",t.price,t.quantity?"* ".concat(t.quantity):null)})),c.a.createElement("p",null,"In total: $",n)),c.a.createElement("button",{onClick:function(){return r(e)},disabled:o?"":"disabled"},"Go checkout!"))}));n(27);var R=function(){return c.a.createElement("div",null,c.a.createElement(h,null),c.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=n(13),A=n(14),S=(n(28),[U.a]);var q=Object(l.createStore)(T,Object(A.composeWithDevTools)(l.applyMiddleware.apply(void 0,S)));q.dispatch((function(t){m.getProducts((function(e){t(function(t){return{type:"RECEIVE_PRODUCTS",products:t}}(e))}))})),u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,{store:q},c.a.createElement(R,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.f2954300.chunk.js.map